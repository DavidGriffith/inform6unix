<HTML><HEAD><TITLE>Answer to Exercise 13</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><TR><TD Valign="top"><IMG SRC="../icons/exercise.gif" ALT="??"><TD bgcolor="#FAA89B"><B>ANSWER TO EXERCISE 13</B><TR><TD><TD>
<P>

The
"plank breaking'' rule is implemented here in its <TT>door_to</TT> routine.
Note that this returns 'true' after killing the player.
<PRE>
Object -&#62; PlankBridge "plank bridge"
  with description "Extremely fragile and precarious.",
       name "precarious" "fragile" "wooden" "plank" "bridge",
       when_open
           "A precarious plank bridge spans the chasm.",
       door_to
       [;  if (children(player)~=0)
           {   deadflag=1;
              "You step gingerly across the plank, which bows under
               your weight. But your meagre possessions are the straw
               which breaks the camel's back! There is a horrid crack...";
           }
           print "You step gingerly across the plank, grateful that
                  you're not burdened.^";
           if (location==NearSide) return FarSide; return NearSide;
       ],
       door_dir
       [;  if (location==NearSide) return s_to; return n_to;
       ],
       found_in NearSide FarSide,
  has  static door open;
</PRE>

There might be a problem with this solution if your game also contained
a character who wandered about, and whose code was clever enough to run
<TT>door_to</TT> routines for any <TT>door</TT>s it ran into.  If so, <TT>door_to</TT> could
perhaps be modified to check that the <TT>actor</TT> is the <TT>player</TT>.
</TABLE>
<HR>Back to <A HREF="../section12.html#ex13">the exercise in section 12</A><HR>
<SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>

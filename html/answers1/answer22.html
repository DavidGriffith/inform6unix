<HTML><HEAD><TITLE>Answer to Exercise 22</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><TR><TD Valign="top"><IMG SRC="../icons/exercise.gif" ALT="??"><TD bgcolor="#FAA89B"><B>ANSWER TO EXERCISE 22</B><TR><TD><TD>
<P>

First add a <TT>Clap</TT> verb (this is easy).  Then
give Charlotte a <TT>number</TT> property (initially 0, say) and add
these three lines to the end of Charlotte's <TT>grammar</TT> routine:
<PRE>
           self.number=TryNumber(verb_wordnum);
           if (self.number~=-1000)
           {    action=##Clap; noun=0; second=0; rtrue; }
</PRE>

Her <TT>orders</TT> routine now needs a local variable called <TT>i</TT>, and
the new clause:
<PRE>
           Clap: if (self.number==0) "Charlotte folds her arms.";
                 for (i=0:i&#60;self.number:i++)
                 {   print "Clap! ";
                     if (i==100)
                         print "(You must be regretting this by now.) ";
                     if (i==200)
                         print "(What a determined girl she is.) ";
                 }
                 if (self.number&#62;100)
                    "^^Charlotte is a bit out of breath now.";
                "^^~Easy!~ says Charlotte.";
</PRE>

</TABLE>
<HR>Back to <A HREF="../section16.html#ex22">the exercise in section 16</A><HR>
<SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>

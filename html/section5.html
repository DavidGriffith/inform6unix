<HTML><HEAD><TITLE>Section 5: Compiler options and memory settings</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><P>
<TR><TD Valign="top"><A HREF="contents.html">Contents</A><BR><A HREF="section4.html">Back</A><BR><A HREF="section6.html">Forward</A><TD bgcolor="#F5DEB3"><BLOCKQUOTE><H3>5. Compiler options and memory settings</H3></BLOCKQUOTE><TR><TD><TD>
It is time to give a full list of the "switches'', which are the
main way to make choices about how Inform will operate.  (This list
can always be printed out with the <TT>-h2</TT> switch.)
<PRE>
  a   trace assembly-language (without hex dumps; see -t)
  c   more concise error messages
  d   contract double spaces after full stops in text
  d2  contract double spaces after exclamation and question marks, too
  e   economy mode (slower): make use of declared abbreviations
  f   frequencies mode: show how useful abbreviations are
  g   traces calls to functions (except in the library)
  g2  traces calls to all functions
  h   print this information
  i   ignore default switches set within the file
  j   list objects as constructed
  k   output Infix debugging information to "gamedebug"
  l   list every statement run through Inform
  m   say how much memory has been allocated
  n   print numbers of properties, attributes and actions
  o   print offset addresses
  p   give percentage breakdown of story file
  q   keep quiet about obsolete usages
  r   record all the text to "gametext"
  s   give statistics
  t   trace assembly-language (with full hex dumps; see -a)
  u   work out most useful abbreviations (very very slowly)
  v3  compile to version-3 (Standard) story file
  v4  compile to version-4 (Plus) story file
  v5  compile to version-5 (Advanced) story file
  v6  compile to version-6 (graphical) story file
  v7  compile to version-7 (*) story file
  v8  compile to version-8 (*) story file
      (*) formats for very large games, requiring
          slightly modified game interpreters to play
  w   disable warning messages
  x   print # for every 100 lines compiled
  y   trace linking system
  z   print memory map of the Z-machine
  D   insert "Constant DEBUG;" automatically
  E0  Archimedes-style error messages (current setting)
  E1  Microsoft-style error messages
  E2  Macintosh MPW-style error messages
  F1  use temporary files to reduce memory consumption
  M   compile as a Module for future linking
  R0  use filetype 060 + version number for games (default)
  R1  use official Acorn filetype 11A for all games
  T   enable throwback of errors in the DDE
  U   insert "Constant USE_MODULES;" automatically
</PRE>

Note that the list may vary slightly from machine to machine:
<TT>R0</TT>, <TT>R1</TT> and <TT>T</TT> above are for Acorn RISC OS machines only,
for example.
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/dbend.gif" ALT="/\"><TD bgcolor="#EEEEEE"><SMALL>
Note that these switches can also be selected by putting a <TT>Switches</TT>
directive, such as <TT>Switches xdv8s;</TT> right at the start of the source
code.
</SMALL>
<TR><TD><TD><P>

Only two switches have a really drastic effect:
<P>
<P>

 <TT>M</TT><SAMP>            </SAMP> Makes Inform compile a "module'', not a "game''.
See <A HREF="section4.html">Section 4</A>.3.
<P>
<P>

 <TT>v</TT><SAMP>            </SAMP> Chooses the format of the game to be compiled.
<TT>v5</TT> is the default, but if a game begins to overflow this, try <TT>v8</TT>.
(The other settings are intended mainly for maintainers of Infocom
interpreters to test their wares.)
<P>

<P>
 <TT>i</TT><SAMP>            </SAMP> Overrides any switches set by <TT>switches</TT> directives in
the source code; so that the game can be compiled with different options
without having to alter that source code.
<P>
<P>

Many of the remaining switches make Inform produce text as it runs,
without affecting the actual compilation:
<P>
<P>

 <TT>a l m n t y</TT><SAMP>            </SAMP> Tracing options to help with maintaining
Inform, or for debugging assembly language
programs.

<P>

 <TT>o p s z</TT><SAMP>            </SAMP> To print out information about the final game file:
the <TT>s</TT> (statistics) option is particularly useful to keep track of how
large the game is growing.
<P>

 <TT>c w q E T</TT><SAMP>            </SAMP> In <TT>c</TT> mode, Inform does not quote whole source lines
together with error messages; in <TT>w</TT> mode it suppresses warnings; in <TT>T</TT>
mode, which is only present on RISC OS machines, error throwback
will occur in the 'Desktop Development Environment'.  <TT>q</TT> causes
"this usage is obsolete'' warnings to be suppressed, which may
be useful when compiling very long, very old programs.  Finally, <TT>E</TT> is
provided since different error formats fit in better with debugging tools
on different machines.
<P>

 <TT>f</TT><SAMP>            </SAMP> Indicates roughly how many bytes the abbreviations saved.
<P>

 <TT>h</TT><SAMP>            </SAMP> Prints out the help information.
<P>

 <TT>j x</TT><SAMP>            </SAMP> Makes Inform print out steady text to prove that it's
still awake: on very slow machines this may be a convenience.
<P>

 <TT>k</TT><SAMP>            </SAMP> Writes a "debugging information'' file for the use of
the Infix debugger (the filename will be something suitable for
your machine).
<P>

 <TT>r</TT><SAMP>            </SAMP> Intended to help with proof-reading the text of a game:
transcribes all of the text in double-quotes to the given file (whose
filename will be something suitable for your machine).
<P>

 <TT>u</TT><SAMP>            </SAMP> Tries to work out a good set of abbreviations to
declare for your game, but <I> extremely slowly</I> (a matter of hours) and
<I> consuming very much memory</I> (perhaps a megabyte).
<P>

<P>
 <TT>D U</TT><SAMP>            </SAMP> When these switches are set, the constants
<TT>DEBUG</TT> (which make the Library add the debugging suite to a game)
and <TT>USE_MODULES</TT> (which speeds up compilation by linking in the Library
rather than recompiling it) are automatically defined.  This is just a
convenience: it's a nuisance to keep adding and removing source code
lines to do the same thing.
<P>

<P>
This leaves three more switches which actually alter the game file which
Inform would compile:
<P>
 <TT>d</TT><SAMP>            </SAMP> Converts text like
<PRE>
"...with a mango.  You applaud..."
</PRE>

into the same with only a single space after the full stop, which will
prevent an interpreter from displaying a spurious space at the beginning
of a line when a line break happens to occur exactly after the full stop;
this is to help typists who habitually double-space.  Stepping up to <TT>-d2</TT>
also contracts double spaces after question or exclamation
marks.
<P>

 <TT>e</TT><SAMP>            </SAMP> Only in 'economy' mode does Inform actually process
abbreviations, because this is seldom needed and slows the compiler by
10% or so; the game file should not play any differently if compiled
this way, but will probably be shorter, if your choice of abbreviations
was sensible.
<P>

 <TT>g</TT><SAMP>            </SAMP> Makes Inform automatically compile trace-printing
code on every function call; in play this will produce reams of text (several
pages between each chance to type commands) but is sometimes useful.  Note
that in Inform 5.3 or later, this can be set on an individual command by
writing <TT>*</TT> as its first local variable, without use of the <TT>g</TT>
switch.
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/dbend.gif" ALT="/\"><TD bgcolor="#EEEEEE"><SMALL>
There are two directives for setting switches, to be used if there's
no other convenient way on your system (for example if you have a poor
windowed front end and no command line to type on).  These are:
<BLOCKQUOTE>
<TT>Switches </TT><I><B>&#60;some settings&#62;</B></I><TT>;</TT><BR>
<TT>Version </TT><I><B>&#60;number&#62;</B></I><TT>;</TT><BR>
</BLOCKQUOTE>

These can only be used as first lines in the program and are illegal once
other directives or routines have been given.  Note that
<PRE>
Version 6;
</PRE>

(for instance) is redundant, as it is equivalent to
<PRE>
Switches v6;
</PRE>
</SMALL>
<TR><TD><TD><P>

<P>
<P><TR><TD Valign="top"><IMG SRC="icons/dbend.gif" ALT="/\"><TD bgcolor="#EEEEEE"><SMALL>
Inform's memory management is very flexible, but sometimes needs attention
from the user, rather than being able to tinker with itself automatically.
This is unfortunate but Inform has to run in some quite hostile
environments and is obliged to be cautious.
</SMALL>
<TR><TD><TD><P>

<TR><TD><TD bgcolor="#EEEEEE"><SMALL>
In particular, it is unable to increase the size of any stretch of memory
once allocated, so if it runs out of anything it has to give up.  If it
does run out, it will produce an error message saying what it has run out of
and how to provide more.
<P>

There are three main choices: <TT>$small</TT>, <TT>$large</TT> and <TT>$huge</TT>.  (Which one is
the default depends on the computer you use.)  Even <TT>$small</TT> is large enough
to compile all the example games, including 'Advent'.  <TT>$large</TT> compiles
almost anything and <TT>$huge</TT> has been used only for 'Curses' and
'Jigsaw' in their most advanced states, and even they hardly need it.
A typical game, compiled with <TT>$large</TT>, will cause Inform to allocate about
350K of memory: and the same game about 100K less under <TT>$small</TT>.  (These
values will be rather lower if the computer Inform runs on has 16-bit
integers.)  In addition, Inform physically occupies about 210K (on my
computer).  Thus, the total memory consumption of the compiler at work
will be about 500K.

<P>

Running
<PRE>
    inform $list
</PRE>


will list the various settings which can be changed, and their current
values.  Thus one can compare small and large with:
<PRE>
    inform $small $list
    inform $large $list
</PRE>

If Inform runs out of allocation for something, it will generally print an
error message like:
<PRE>
   "Game", line 1320: Fatal error: The memory setting MAX_OBJECTS (which
   is 200 at present) has been exceeded.  Try running Inform again with
   $MAX_OBJECTS=&#60;some-larger-number&#62; on the command line.
</PRE>

and indeed
<PRE>
    inform $MAX_OBJECTS=250 game
</PRE>

(say) will tell Inform to try again, reserving more memory for objects this
time.  Note that settings are made from left to right, so that for instance
<PRE>
    inform $small $MAX_ACTIONS=200 ...
</PRE>

will work, but
<PRE>
    inform $MAX_ACTIONS=200 $small ...
</PRE>

will not because the <TT>$small</TT> changes <TT>MAX_ACTIONS</TT> again.
Changing some settings has hardly any effect on memory usage, whereas others
are expensive to increase.  To find out about, say, <TT>MAX_VERBS</TT>, run
<PRE>
    inform $?MAX_VERBS
</PRE>

(note the question mark) which will print some very brief comments.
Users of Unix, where <TT>$</TT> and <TT>?</TT> are special shell characters, will need
to type
<PRE>
    inform '$?list'         inform '$?MAX_VERBS'
</PRE>

and so on.
</SMALL><TR><TD><TD>
</TABLE>
<HR><A HREF="contents.html">Contents</A> / <A HREF="section4.html">Back</A> / <A HREF="section6.html">Forward</A> <BR>
<A HREF="chapter1.html">Chapter I</A> / <A HREF="chapter2.html">Chapter II</A> / <A HREF="chapter3.html">Chapter III</A> / <A HREF="chapter4.html">Chapter IV</A> / <A HREF="chapter5.html">Chapter V</A> / <A HREF="chapter6.html">Chapter VI</A> / <A HREF="chapterA.html">Appendix</A><HR><SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>

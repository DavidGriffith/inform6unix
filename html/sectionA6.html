<HTML><HEAD><TITLE>Section A6: Library properties</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><P>
<TR><TD Valign="top"><A HREF="contents.html">Contents</A><BR><A HREF="sectionA5.html">Back</A><BR><A HREF="sectionA7.html">Forward</A><TD bgcolor="#F5DEB3"><BLOCKQUOTE><H3>A6. Library properties</H3></BLOCKQUOTE><TR><TD><TD>

The following table lists every library-defined property.  The banner
headings give the name, what type of value makes sense and the default value
(if other than 0).  The symbol
<B>+</B>
means "this property is additive''
so that inherited values from class definitions pile up into a list, rather
than wipe each other out.  Recall that 'false' is the value 0 and 'true'
the value 1.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>n_to, s_to, e_to, w_to, ...</B></TT> -- Room, object or routine<TR><TD><TD>
<BR><I>For rooms: </I>These twelve properties (there are also <TT>ne_to</TT>, <TT>nw_to</TT>, <TT>se_to</TT>,
<TT>sw_to</TT>, <TT>in_to</TT>, <TT>out_to</TT>, <TT>u_to</TT> and <TT>d_to</TT>) are the map connections for
the room.  A value of 0 means "can't go this way''.  Otherwise, the
value should either be a room or a <TT>door</TT> object: thus, <TT>e_to</TT> might be set
to <TT>crystal_bridge</TT> if the direction "east'' means "over the crystal
bridge''.
<P>

<BR><I>Routine should return:</I> The room or object the map connects to; or 0 for "can't go this way'';
or 1 for "can't go this way; stop and print nothing further''.
<P>

<BR><I>Warning: </I> Do not confuse the direction properties <TT>n_to</TT> and so on with
the twelve direction objects, <TT>n_obj</TT> et
al.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>add_to_scope</B></TT> -- List of objects or routine<TR><TD><TD>
<BR><I>For objects: </I>When this object is in scope, so are all those listed, or all those
nominated by the routine.  A routine given here should call
<TT>PlaceInScope(obj)</TT> to put <TT>obj</TT> in scope.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>after</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
Receives actions after they have happened, but before the player has
been told of them.
<P>

<BR><I>For rooms: </I>All actions taking place in this room.
<P>

<BR><I>For objects: </I>All actions for which this object is <TT>noun</TT> (the first object
specified in the command); and all fake actions for it.
<P>

<BR><I>Routine should return:</I> False to continue (and tell the player what has happened), true to
stop here (printing nothing).
<P>

 The <TT>Search</TT> action is a slightly special case.  Here, <TT>after</TT> is
called when it is clear that it would be sensible to look inside the object
(e.g., it's an open container in a light room) but before the contents
are described.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>article</B></TT> -- String or routine (<TT>"a"</TT>)<TR><TD><TD>
<BR><I>For objects: </I>Indefinite article for object or routine to print one.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>articles</B></TT> -- Array of strings<TR><TD><TD>
For objects: If given, these are the articles used with
the object's name.  (Provided for non-English languages
where irregular nouns may have unusual vowel-contraction
rules with articles: e.g. with French non-mute 'H'.)
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>before</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
Receives advance warning of actions (or fake actions) about to happen.
<P>

<BR><I>For rooms: </I>All actions taking place in this room.
<P>

<BR><I>For objects: </I>All actions for which this object is <TT>noun</TT> (the first object
specified in the command); and all fake actions, such as <TT>Receive</TT>
and <TT>LetGo</TT> if this object is the container or supporter concerned.
<P>

<BR><I>Routine should return:</I> False to continue with the action, true to stop here (printing
nothing).
<P>

 First special case: A vehicle object receives the <TT>Go</TT>
action if the player is trying to drive around in it.  In this case:
<P>

<BR><I>Routine should return:</I> 0 to disallow as usual; 1 to allow as usual, moving vehicle and
player; 2 to disallow but do (and print) nothing; 3 to allow but do
(and print) nothing.  If you want to move the vehicle in your own code,
return 3, not 2: otherwise the old location may be restored by subsequent
workings.
<P>

 Second special case: in a <TT>PushDir</TT> action, the <TT>before</TT>
routine must call <TT>AllowPushDir()</TT> and then return true in order to
allow the attempt (to push an object from one room to another) to
succeed.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>cant_go</B></TT> -- String or routine (<TT>"You can't go that way."</TT>)<TR><TD><TD>
<BR><I>For rooms: </I>Message, or routine to print one, when a player tries to go in an
impossible direction from this room.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>capacity</B></TT> -- Number or routine (<TT>100</TT>)<TR><TD><TD>
<BR><I>For objects: </I>Number of objects a <TT>container</TT> or <TT>supporter</TT>
can hold.
<P>

<BR><I>For player objects: </I>Number of things the player can carry (when the player is this
object); the default player object (<TT>selfobj</TT>) has <TT>capacity</TT> initially
set to the constant <TT>MAX_CARRIED</TT>.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>daemon</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
This routine is run each turn, once it has been activated by a
call to <TT>StartDaemon</TT>, and until stopped by a call to <TT>StopDaemon</TT>.
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>describe</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
<BR><I>For objects: </I>Called when the object is to be described in a room description,
before any paragraph break (i.e., skipped line) has been printed.  A
sometimes useful trick is to print nothing in this routine and return
true, which makes an object 'invisible'.
<P>

<BR><I>For rooms: </I>Called before a room's long ("look'') description is printed.
<P>

<BR><I>Routine should return:</I> False to describe in the usual way, true to stop printing here.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>description</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>The <TT>Examine</TT> message, or a routine to print one out.
<P>

<BR><I>For rooms: </I>The long ("look'') description, or a routine to print one out.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>door_dir</B></TT> -- Direction property or routine<TR><TD><TD>
<BR><I>For compass objects: </I>When the player tries to go in this direction, e.g., by typing the
name of this object, then the map connection tried is the value of
this direction property for the current room.  For example, the
<TT>n_obj</TT> "north'' object normally has <TT>door_dir</TT> set to <TT>n_to</TT>.
<P>

<BR><I>For objects: </I>The direction that this <TT>door</TT> object goes via (for instance,
a bridge might run east, in which case this would be set to <TT>e_to</TT>).
<P>

<BR><I>Routine should return:</I> The direction property to try.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>door_to</B></TT> -- Room or routine<TR><TD><TD>
<BR><I>For objects: </I>The place this door object leads to.  A value of 0 means
"leads nowhere''.
<P>

<BR><I>Routine should return:</I> The room.  Again, 0 (or false) means "leads nowhere''.
Further, 1 (or true) means "stop the movement action immediately
and print nothing further''.
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>each_turn</B></TT> -- String or routine (<TT>NULL</TT>)<TR><TD><TD>
String to print, or routine to run, at the end of each turn in which
the object is in scope (after all timers and daemons for that turn have
been run).
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>found_in</B></TT> -- List of rooms or routine<TR><TD><TD>
This object will be found in all of the listed rooms, or if
the routine says so, unless it has the attribute <TT>absent</TT>.  If
an object in the list is not a room, it means "present in the
same room as this object''.
<P>

<BR><I>Routine should return:</I> True to be present, otherwise false.  The routine can look
at the current <TT>location</TT> in order to decide.
<P>

<BR><I>Warning: </I>This property is only looked at when the player changes rooms.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>grammar</B></TT> -- Routine<TR><TD><TD>
<BR><I>For animate or talkable objects: </I> This is called when the
parser has worked out that the object in question is being spoken
to, and has decided the <TT>verb_word</TT> and <TT>verb_wordnum</TT> (the position
of the verb word in the word stream) but hasn't yet tried any grammar.
The routine can, if it wishes, parse past some words (provided it
moves <TT>verb_wordnum</TT> on by the number of words it wants to eat up).
<P>

<BR><I>Routine should return:</I>  False to carry on as usual; true to indicate that the routine
has parsed the entire command itself, and set up <TT>action</TT>, <TT>noun</TT>
and <TT>second</TT> to the appropriate order; or a dictionary value for
a verb, such as <TT>'take'</TT>, to indicate "parse the command from this
verb's grammar instead''; or minus such a value, e.g. <TT>-'take'</TT>,
to indicate "parse from this verb and then parse the usual
grammar as well''.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>initial</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>The description of an object not yet picked up, used when a
room is described; or a routine to print one out.
<P>

<BR><I>For rooms: </I>Printed or run when the room is arrived in, either by ordinary
movement or by <TT>PlayerTo</TT>.
<P>

<BR><I>Warning: </I>If the object is a <TT>door</TT>, or a <TT>container</TT>, or is <TT>switchable</TT>,
then use one of the <TT>when_</TT> properties rather than <TT>initial</TT>.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>inside_description</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>Printed as part or all of a room description when the player is
inside the given object, which must be <TT>enterable</TT>.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>invent</B></TT> -- Routine<TR><TD><TD>
This routine is for changing an object's inventory listing.  If provided,
it's called twice, first with the variable <TT>inventory_stage</TT> set to 1,
second with it set to 2.  At stage 1, you have an entirely free hand to
print a different inventory listing.
<P>

<BR><I>Routine should return:</I> Stage 1: False to continue; true to stop here, printing nothing further
about the object or its contents.
<P>

 At stage 2, the object's indefinite article and short name have
already been printed, but messages like " (providing light)'' haven't. 
This is an opportunity to add something like " (almost empty)".
<P>

<BR><I>Routine should return:</I> Stage 2: False to continue; true to stop here, printing nothing further
about the object or its contents.
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>life</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
This routine holds rules about <TT>animate</TT> objects, behaving much like
<TT>before</TT> and <TT>after</TT> but only handling the person-to-person events:
<PRE>
Attack Kiss WakeOther ThrowAt Give Show Ask Tell Answer Order
</PRE>

See <A HREF="section16.html">Section 16</A>, and see also the properties <TT>orders</TT> and <TT>grammar</TT>.
<P>

<BR><I>Routine should return:</I> True to stop and print nothing, false to resume as usual (for example,
printing "Miss Gatsby has better things to do.'').
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>list_together</B></TT> -- Number, string or routine<TR><TD><TD>
\fo
Objects with the same <TT>list_together</TT> value are grouped together in
object lists (such as inventories, or the miscellany at the end of a
room description).  If a string such as <TT>"fish"</TT> is given, then such
a group will be headed with text such as <TT>"five fish"</TT>.
<P>

 A routine, if given, is called at two stages in the process
(once with the variable <TT>inventory_stage</TT> set to 1, once with it set to 2).
These stages occur before and after the group is printed; thus, a
preamble or postscript can be printed.  Also, such a routine may
change the variable <TT>c_style</TT> (which holds the current list style).
On entry, the variable <TT>parser_one</TT> holds the first object in the
group, and <TT>parser_two</TT> the current depth of recursion in the list.
Applying <TT>x=NextEntry(x,parser_two);</TT> moves <TT>x</TT> on from <TT>parser_one</TT>
to the next item in the group.  Another helpful variable is
<TT>listing_together</TT>, set up to the first object of a group being listed
(or to 0 whenever no group is being listed).
<P>

<BR><I>Routine should return:</I> Stage 1: False to continue, true not to print the group's list
at all.
<P>

<BR><I>Routine should return:</I> Stage 2: No return value.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>orders</B></TT> -- Routine<TR><TD><TD>
<BR><I>For animate or talkable objects: </I> This carries out the player's
orders (or doesn't, as it sees fit): it looks at <TT>actor</TT>, <TT>action</TT>,
<TT>noun</TT> and <TT>second</TT> to do so.  Unless this object is the current
player, <TT>actor</TT> is irrelevant (it is always the player) and the
object is the person being ordered about.
<P>

 If the player typed an incomprehensible command, like
"robot, og sthou'', then the action is <TT>NotUnderstood</TT> and the
variable <TT>etype</TT> holds the parser's error number.
<P>

 If this object is the current player then <TT>actor</TT> is
the person being ordered about.  <TT>actor</TT> can either be this
object -- in which case an action is being processed, because
the player has typed an ordinary command -- or can be some other
object, in which case the player has typed an order.  See
<A HREF="section16.html">Section 16</A> for how to write <TT>orders</TT> routines in these cases.
<P>

<BR><I>Routine should return:</I> True to stop and print nothing further; false to continue.
(Unless the object is the current player, the <TT>life</TT> routine's
<TT>Order</TT> section gets an opportunity to meddle next; after that,
Inform gives up.)
<P>

<P><TR><TD Valign="top"><B>(+)</B><TD bgcolor="#AE9BFF"><TT><B>name</B></TT> -- List of dictionary words<TR><TD><TD>
<BR><I>For objects: </I>A list of dictionary words referring to this object.
<P>

<BR><I>Warning: </I>The <TT>parse_name</TT> property of an object may take precedence over this,
if present.
<P>

<BR><I>For rooms: </I>A list of words which the room understands but which refer to things
which "do not need to be referred to in this game''; these are only looked
at if all other attempts to understand the player's command have failed.
<P>

<BR><I>Warning: </I>Uniquely in Inform syntax, these dictionary words are given in double
quotes <TT>"thus"</TT>, whereas in all other circumstances they would be <TT>'thus'</TT>. 
This means they can safely be only one letter long without ambiguity.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>number</B></TT> -- Any value<TR><TD><TD>
A general purpose property left free: conventionally holding a number like
"number of turns' battery power left''.
<P>

<BR><I>For compass objects: </I>Note that the standard compass objects defined by the library all
provide a <TT>number</TT> property, in case this might be useful to the designer.
<P>

<BR><I>For player objects: </I>Exception: an object to be used as a player-object must provide one of
these, and musn't use it for anything.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>parse_name</B></TT> -- Routine<TR><TD><TD>
<BR><I>For objects: </I>To parse an object's name (this overrides the <TT>name</TT> but is also used in
determining if two objects are describably identical). This routine should
try to match as many words as possible in sequence, reading them one at a
time by calling <TT>NextWord()</TT>. (It can leave the "word marker'' variable
<TT>wn</TT> anywhere it likes).
<P>

<BR><I>Routine should return:</I> 0 if the text didn't make any sense at all, -1 to make the parser resume
its usual course (looking at the <TT>name</TT>), or the number of words in a row
which successfully matched.
<P>

 In addition to this, if the text matched seems to be in the plural
(for instance, a blind mouse object reading <TT>blind mice</TT>), the routine can
set the variable <TT>parser_action</TT> to the value <TT>##PluralFound</TT>.  The parser
will then match with all of the different objects understood, rather than
ask a player which of them is meant.
<P>

 A <TT>parse_name</TT> routine may also (voluntarily) assist the parser
by telling it whether or not two objects which share the same <TT>parse_name</TT>
routine are identical.  (They may share the same routine if they both inherit
it from a class.)  If, when it is called, the variable <TT>parser_action</TT> is
set to <TT>##TheSame</TT> then this is the reason.  It can then decide whether or
not the objects <TT>parser_one</TT> and <TT>parser_two</TT> are indistinguishable.
<P>

<BR><I>Routine should return:</I> -1 if the objects are indistinguishable, -2 if not.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>plural</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>The plural name of an object (when in the presence of others like it),
or routine to print one; for instance, a wax candle might have <TT>plural</TT> set
to <TT>"wax candles"</TT>.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>react_after</B></TT> -- Routine<TR><TD><TD>
<BR><I>For objects: </I>Acts like an <TT>after</TT> rule, but detects any actions in the vicinity
(any actions which take place when this object is in scope).
<P>

<BR><I>Routine should return:</I> True to print nothing further; false to carry on.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>react_before</B></TT> -- Routine<TR><TD><TD>
<BR><I>For objects: </I>Acts like a <TT>before</TT> rule, but detects any actions in the vicinity
(any actions which take place when this object is in scope).
<P>

<BR><I>Routine should return:</I> True to stop the action, printing nothing; false to carry on.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>short_name</B></TT> -- Routine<TR><TD><TD>
<BR><I>For objects: </I>The short name of an object (like "brass lamp"), or a routine to print
it.
<P>

<BR><I>Routine should return:</I> True to stop here, false to carry on by printing the object's 'real'
short name (the string given at the head of the object's definition).  It's
sometimes useful to print text like <TT>"half-empty "</TT> and then return false.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>short_name_indef</B></TT> -- Routine<TR><TD><TD>
<BR><I>For objects: </I>If set, this form of the short name is used
when the name is prefaced by an indefinite article.  (This
is not useful in English-language games, but in other
languages adjectival parts of names agree with the
definiteness of the article.)
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>time_left</B></TT> -- Number<TR><TD><TD>
Number of turns left until the timer for this object (if set, which must be
done using <TT>StartTimer</TT>) goes off.  Its initial value is of no significance,
as <TT>StartTimer</TT> will write over this, but a timer object must provide the
property.  If the timer is currently set, the value 0 means "will go off
at the end of the current turn'', the value 1 means "...at the end of
next turn'' and so on.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>time_out</B></TT> -- Routine (<TT>NULL</TT>)<TR><TD><TD>
Routine to run when the timer for this object goes off (having been set by
<TT>StartTimer</TT> and not in the mean time stopped by <TT>StopTimer</TT>).
<P>

<BR><I>Warning: </I>A timer object must also provide a <TT>time_left</TT> property.
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>when_closed</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>Description, or routine to print one, of something closed (a <TT>door</TT> or
<TT>container</TT>) in a room's long description.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>when_open</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>Description, or routine to print one, of something open (a <TT>door</TT> or
<TT>container</TT>) in a room's long description.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>when_on</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>Description, or routine to print one, of a <TT>switchable</TT> object which is
currently switched on, in a room's long description.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>when_off</B></TT> -- String or routine<TR><TD><TD>
<BR><I>For objects: </I>Description, or routine to print one, of a <TT>switchable</TT> object which is
currently switched off, in a room's long description.
<P>

<BR><I>No return value expected from routine.</I>
<P>

<P><TR><TD><TD bgcolor="#AE9BFF"><TT><B>with_key</B></TT> -- Object (<TT>nothing</TT>)<TR><TD><TD>
The key object needed to lock or unlock this <TT>lockable</TT> object. A player
must explicitly name it as the key being used and be holding it at the time. 
The value <TT>nothing</TT>, or 0, means that no key fits (though this is not made
clear to the player, who can try as many as he likes).
</TABLE>
<HR><A HREF="contents.html">Contents</A> / <A HREF="sectionA5.html">Back</A> / <A HREF="sectionA7.html">Forward</A> <BR>
<A HREF="chapter1.html">Chapter I</A> / <A HREF="chapter2.html">Chapter II</A> / <A HREF="chapter3.html">Chapter III</A> / <A HREF="chapter4.html">Chapter IV</A> / <A HREF="chapter5.html">Chapter V</A> / <A HREF="chapter6.html">Chapter VI</A> / <A HREF="chapterA.html">Appendix</A><HR><SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>

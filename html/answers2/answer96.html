<HTML><HEAD><TITLE>Answer to Exercise 96</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><TR><TD Valign="top"><IMG SRC="../icons/exercise.gif" ALT="??"><TD bgcolor="#FAA89B"><B>ANSWER TO EXERCISE 96</B><TR><TD><TD>
<P>

The following implementation is limited to a format
string
2x64 = 128
characters long, and six subsequent arguments.
<TT>%d</TT> becomes a decimal number, <TT>%e</TT> an English one; <TT>%c</TT>
a character, <TT>%%</TT> a (single) percentage sign and <TT>%s</TT>
a string.
<PRE>
Array printed_text table 64;
Array printf_vals --&#62; 6;
[ Printf format p1 p2 p3 p4 p5 p6   pc j k;
  printf_vals--&#62;0 = p1; printf_vals--&#62;1 = p2; printf_vals--&#62;2 = p3;
  printf_vals--&#62;3 = p4; printf_vals--&#62;4 = p5; printf_vals--&#62;5 = p6;
  printed_text--&#62;0 = 64; @output_stream 3 printed_text;
  print (string) format; @output_stream -3;
  j=printed_text--&#62;0;
  for (k=2:k&#60;j+2:k++)
  {   if (printed_text-&#62;k == '%')
      {   switch(printed_text-&#62;(++k))
          {   '%': print "%";
              'c': print (char) printf_vals--&#62;pc++;
              'd': print printf_vals--&#62;pc++;
              'e': print (number) printf_vals--&#62;pc++;
              's': print (string) printf_vals--&#62;pc++;
              default: print "&#60;** Unknown printf escape **&#62;";
          }
      }
      else print (char) printed_text-&#62;k;
  }
];
</PRE>

</TABLE>
<HR>Back to <A HREF="../section33.html#ex96">the exercise in section 33</A><HR>
<SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>

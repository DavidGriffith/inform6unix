<HTML><HEAD><TITLE>Section 14: Things to enter, travel in and push around</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<TABLE><P>
<TR><TD Valign="top"><A HREF="contents.html">Contents</A><BR><A HREF="section13.html">Back</A><BR><A HREF="section15.html">Forward</A><TD bgcolor="#F5DEB3"><BLOCKQUOTE><H3>14. Things to enter, travel in and push around</H3></BLOCKQUOTE><TR><TD><TD>
<P>

<BLOCKQUOTE>
...the need to navigate a newly added river prompted the invention
of vehicles (specifically, a boat).
<P>...P. David Lebling, Marc Blank and Timothy Anderson</BLOCKQUOTE>
<P>


Some objects in a game are <TT>enterable</TT>, which means that a player can get
inside or onto them.  Usually, "inside" means that the player is only
half-in, as with a car or a psychiatrist's couch.  (If it's more like a
prison cell, then it should be a separate place.)  In practice one often
wants to make an <TT>enterable</TT> thing also a <TT>container</TT>, or, as in the
altar from 'Ruins', a <TT>supporter</TT>:
<PRE>
Object -&#62; stone_table "slab altar"
  with name "stone" "table" "slab" "altar" "great",
       initial "A great stone slab of a table, or altar, dominates the Shrine.",
  has  enterable supporter;
</PRE>

A chair to sit on, or a bed to lie down on, should also be
a <TT>supporter</TT>.
<P>

If the player gets into a <TT>container</TT> and then closes it, the
effect is like being in a different location.  (Unless the container
has the <TT>transparent</TT> attribute and is therefore see-through.)
The interior may be dark, but if there's light to see by, the
player will want to see some kind of room description.  In any case,
many enterable objects ought to look different from inside or on
top.  Inside a vehicle, a player might be able to see a steering
wheel and a dashboard, for instance.  On top of a cupboard, it
might be possible to see through a skylight window.
<P>

For this purpose, any <TT>enterable</TT> object can provide an
<TT>inside_description</TT>, which can be a string or a routine
to print one, as usual.  If the exterior location is still
visible, then the "inside description'' is added to the
normal room description, and otherwise it becomes that
description.  As an extreme example, suppose that the player
gets into a huge cupboard, closes the door behind her and
then gets into a plastic cabinet inside that.  The resulting
room description might read like so:
<BLOCKQUOTE>
<B> The huge cupboard</B> (in the plastic cabinet)<BR>
It's a snug little cupboard in here, almost a room in itself.<BR>
<BR>
In the huge cupboard you can see a pile of clothes.<BR>
<BR>
The plastic walls of the cabinet distort the view.<BR>
</BLOCKQUOTE>

The second line is the <TT>inside_description</TT> for the huge
cupboard, and the fourth is that for the plastic cabinet.
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/exercise.gif" ALT="??"><TD bgcolor="#FBB9AC"><A NAME="ex14"><B>EXERCISE 14:</B><BR>(link to <A HREF="answers1/answer14.html">the answer</A>)<TR><TD><TD> (Also from 'Ruins'.)  Implement a cage which can be opened,
closed and entered.
<P>

<P>

All the classic games have vehicles (like boats, or fork lift trucks, or
hot air balloons) which the player can journey in, so Inform makes this
easy.  Here is a simple case:
<PRE>
Object car "little red car" cave
  with name "little" "red" "car",
       description "Large enough to sit inside.  Among the controls is a
           prominent on/off switch.  The numberplate is KAR 1.",
       when_on  "The red car sits here, its engine still running.",
       when_off "A little red car is parked here.",
       before
       [; Go: if (car has on) "Brmm!  Brmm!";
              print "(The ignition is off at the moment.)^";
       ],
  has  switchable enterable static container open;
</PRE>

Actually, this demonstrates a special rule.  If a player is inside an
<TT>enterable</TT> object and tries to move, say "north", the <TT>before</TT> routine
for the object is called with the action <TT>Go</TT>, and <TT>n_obj</TT> as the noun.
It may then return:
<BLOCKQUOTE>
0<SAMP>      </SAMP> to disallow the movement, printing a refusal;<BR>
1<SAMP>      </SAMP> to allow the movement, moving vehicle and player;<BR>
2<SAMP>      </SAMP> to disallow but print and do nothing; or<BR>
3<SAMP>      </SAMP> to allow but print and do nothing.<BR>
</BLOCKQUOTE>

If you want to move the vehicle in your own code, return 3, not 2: otherwise
the old location may be restored by subsequent workings.
<P>

<P>
Because you might want to drive the car "out'' of a garage,
the "out'' verb does not make the player get out of the car.  Usually
the player has to type something like "get out'' to make this happen,
though of course the rules can be changed.
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/exercise.gif" ALT="??"><TD bgcolor="#FBB9AC"><A NAME="ex15"><B>EXERCISE 15:</B><BR>(link to <A HREF="answers1/answer15.html">the answer</A>)<TR><TD><TD> Alter the car so that it won't go
east.
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/dbend.gif" ALT="/\"><TD bgcolor="#EEEEEE"><SMALL>
Objects like the car or, say, an antiquated
wireless on casters, are obviously too heavy to pick up but the player
should at least be able to push them from place to place.  When the
player tries to do this, the <TT>PushDir</TT> action is generated.  Now, if
the <TT>before</TT> routine returns false, the game will just say that the
player can't; and if it returns true, the game will do nothing at all,
guessing that the <TT>before</TT> routine has already printed something more
interesting.  So how does one actually tell Inform that the push
should be allowed?  The answer is that one has to do two things:
call the <TT>AllowPushDir</TT> routine (a library routine), and then
return true.  For example ('Ruins' again):
<PRE>
Object -&#62; huge_ball "huge pumice-stone ball"
  with name "huge" "pumice" "pumice-stone" "stone" "ball",
       description "A good eight feet across, though fairly lightweight.",
       initial
           "A huge pumice-stone ball rests here, eight feet wide.",
       before
       [;  PushDir:
               if (location==Junction &#38;&#38; second==w_obj)
                   "The corridor entrance is but seven feet across.";
               AllowPushDir(); rtrue;
           Pull, Push, Turn: "It wouldn't be so very hard to get rolling.";
           Take, Remove: "There's a lot of stone in an eight-foot sphere.";
       ],
       after
       [;  PushDir:
              if (second==s_obj) "The ball is hard to stop once underway.";
              if (second==n_obj) "You strain to push the ball uphill.";
       ],
  has  static;
</PRE>

</SMALL>
<TR><TD><TD><P>

<P><TR><TD Valign="top"><IMG SRC="icons/dexercise.gif" ALT="??/\"><TD bgcolor="#FBB9AC"><A NAME="ex16"><B>EXERCISE 16:</B><BR>(link to <A HREF="answers1/answer16.html">the answer</A>)<TR><TD><TD> The library does not normally allow pushing objects up or down.
How can the pumice ball allow this?
<P>

<P><TR><TD Valign="top"><IMG SRC="icons/refs.gif" ALT="*"><TD bgcolor="#EEEEEE"><B>REFERENCES:</B><BR><SMALL>  For an <TT>enterable</TT> <TT>supporter</TT> puzzle, see the magic carpet
in 'Balances' (and several items in
'Alice Through The Looking-Glass').
</TABLE>
<HR><A HREF="contents.html">Contents</A> / <A HREF="section13.html">Back</A> / <A HREF="section15.html">Forward</A> <BR>
<A HREF="chapter1.html">Chapter I</A> / <A HREF="chapter2.html">Chapter II</A> / <A HREF="chapter3.html">Chapter III</A> / <A HREF="chapter4.html">Chapter IV</A> / <A HREF="chapter5.html">Chapter V</A> / <A HREF="chapter6.html">Chapter VI</A> / <A HREF="chapterA.html">Appendix</A><HR><SMALL><I>Mechanically translated to HTML from third edition as revised 16 May 1997. Copyright &#169; Graham Nelson 1993, 1994, 1995, 1996, 1997: all rights reserved.</I></SMALL></BODY></HTML>
